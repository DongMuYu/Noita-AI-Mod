# 项目结构说明

## 核心模块架构

本项目采用模块化设计，将游戏功能划分为多个独立的管理器类，每个类负责特定的功能领域。

### 1. Game 模块
- **文件**: `Game.h`, `Game.cpp`
- **功能**: 游戏主循环和核心逻辑协调
- **职责**: 
  - 初始化各个管理器
  - 协调游戏状态更新
  - 处理游戏重置逻辑

### 2. WindowManager 模块
- **文件**: `WindowManager.h`, `WindowManager.cpp`
- **功能**: 窗口管理和配置
- **职责**:
  - 创建和管理主游戏窗口
  - 创建和管理点云地图窗口
  - 处理窗口事件和关闭逻辑
  - 配置窗口属性（VSync、帧率限制）

### 3. ResourceManager 模块
- **文件**: `ResourceManager.h`, `ResourceManager.cpp`
- **功能**: 游戏资源管理
- **职责**:
  - 字体资源加载和管理
  - 文本对象创建工具
  - 资源状态检查和获取

### 4. LevelManager 模块
- **文件**: `LevelManager.h`, `LevelManager.cpp`
- **功能**: 关卡数据管理
- **职责**:
  - 关卡数据解析和加载
  - 瓦片地图生成
  - 玩家起始位置和目标位置管理
  - 玩家位置安全性验证
  - 关卡重置和切换

### 5. UIManager 模块
- **文件**: `UIManager.h`, `UIManager.cpp`
- **功能**: 用户界面管理
- **职责**:
  - 计时器显示
  - FPS计数器显示
  - 能量条显示
  - 玩家目标连线绘制
  - UI元素更新和渲染

### 6. TimeManager 模块
- **文件**: `TimeManager.h`, `TimeManager.cpp`
- **功能**: 游戏时间管理
- **职责**:
  - 游戏时间跟踪
  - FPS计算
  - 暂停状态管理
  - 帧步模式控制
  - 暂停时间累计

### 7. 已清理的空文件
- **Window.cpp**: 已删除，功能迁移到WindowManager
- **Time.cpp**: 不存在，时间管理功能由TimeManager实现

## 模块间依赖关系

```
Game (核心协调)
├── WindowManager (窗口管理)
├── ResourceManager (资源管理)
├── LevelManager (关卡管理)
├── UIManager (UI管理)
├── TimeManager (时间管理)
└── 其他游戏组件
```

## 设计原则

1. **单一职责原则**: 每个模块只负责一个功能领域
2. **解耦设计**: 模块间通过接口通信，降低耦合度
3. **可测试性**: 每个模块可以独立测试
4. **可扩展性**: 新增功能只需添加对应模块
5. **资源管理**: 统一资源管理，避免重复加载

## 使用说明

- **窗口管理**: 通过WindowManager访问和操作窗口
- **资源获取**: 通过ResourceManager获取字体和创建文本
- **关卡操作**: 通过LevelManager管理关卡数据和瓦片
- **UI更新**: 通过UIManager更新和渲染界面元素
- **时间控制**: 通过TimeManager控制游戏时间和暂停状态

这种模块化设计使得代码更加清晰、可维护，并且便于后续功能扩展。